<% layout('layouts/boilerplate') %>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

<% data2.forEach(item => { 
    // Determine the classes based on status
    let boxBgClass = 'bg-white'; // Default box background
    let boxBorderClass = 'border-gray-200'; // Default box border
    let boxShadowClass = 'shadow'; // Default box shadow
    let statusTextClass = 'text-gray-900'; // Default text color
    let iconColorClass = 'text-gray-600'; // Default icon color

    if (item.status === 'Warning') {
        boxBgClass = 'bg-yellow-300'; // Darker yellow background
        boxBorderClass = 'border-yellow-400'; // Border color for warning
        boxShadowClass = 'shadow-md'; // Adjust shadow if needed
        statusTextClass = 'text-gray-900'; // Adjust as needed
        iconColorClass = 'text-yellow-600';
    } else if (item.status === 'Danger') {
        boxBgClass = 'bg-red-500'; // Darker red background
        boxBorderClass = 'border-red-400'; // Border color for danger
        boxShadowClass = 'shadow-md'; // Adjust shadow if needed
        statusTextClass = 'text-gray-900'; // Adjust as needed
        iconColorClass = 'text-red-600';
    }
%>
    <div class="w-full flex justify-center p-1">
        <div class="w-full max-w-3xl p-2 <%= boxBgClass %> border <%= boxBorderClass %> rounded-lg <%= boxShadowClass %> sm:p-8 dark:bg-gray-800 dark:border-gray-700">
            <div class="mb-4">
                <h5 class="text-xl font-bold leading-none text-gray-900 dark:text-white">
                    <%= item.date %> <%= item.time %>
                </h5>
            </div>
            <!-- 3 x 2 Grid layout -->
            <div class="grid grid-cols-3 gap-4 mb-4">
                <div class="p-2 bg-gray-100 border border-gray-300 rounded-lg shadow-sm dark:bg-gray-700 dark:border-gray-600">
                    <i class="fa fa-thermometer-full fa-2x" aria-hidden="true"></i>
                    <h6 class="text-md font-semibold text-gray-700 dark:text-gray-200">Temperature</h6>
                    <p class="text-lg font-bold text-gray-900 dark:text-white"><%= item.tempC.toFixed(1) %>Â°C</p>
                </div>
                <div class="p-2 bg-gray-100 border border-gray-300 rounded-lg shadow-sm dark:bg-gray-700 dark:border-gray-600">
                    <i class="fa fa-tint fa-2x" aria-hidden="true"></i>
                    <h6 class="text-md font-semibold text-gray-700 dark:text-gray-200">Humidity</h6>
                    <p class="text-lg font-bold text-gray-900 dark:text-white"><%= item.humidity %></p>
                </div>
                <div class="p-2 bg-gray-100 border border-gray-300 rounded-lg shadow-sm dark:bg-gray-700 dark:border-gray-600">
                    <i class="fa fa-line-chart fa-2x" aria-hidden="true"></i>
                    <h6 class="text-md font-semibold text-gray-700 dark:text-gray-200">Rain Value</h6>
                    <p class="text-lg font-bold text-gray-900 dark:text-white"><%= item.rain %> mm</p>
                </div>
                <div class="p-2 bg-gray-100 border border-gray-300 rounded-lg shadow-sm dark:bg-gray-700 dark:border-gray-600">
                    <i class="fa fa-umbrella fa-2x <%= item.rain > 10 ? 'text-blue-600' : '' %>" aria-hidden="true"></i>
                    <h6 class="text-md font-semibold text-gray-700 dark:text-gray-200">Rain Status</h6>
                    <p class="text-lg font-bold text-gray-900 dark:text-white">
                        <% if (item.rain === 0) { %>
                            No Rain
                        <% } else if (item.rain > 0 && item.rain < 2.5) { %>
                            Light Rain
                        <% } else if (item.rain >= 2.5 && item.rain <= 7.6) { %>
                            Moderate Rain
                        <% } else if (item.rain > 7.6 && item.rain <= 50) { %>
                            Heavy Rain
                        <% } else if (item.rain > 50 && item.rain <= 100) { %>
                            Very Heavy Rain
                        <% } else { %>
                            Extreme Rain
                        <% } %>
                        
                    </p>
                </div>
                <div class="p-2 bg-gray-100 border border-gray-300 rounded-lg shadow-sm dark:bg-gray-700 dark:border-gray-600">
                    <i class="fa fa-window-maximize fa-2x" aria-hidden="true"></i>
                    <h6 class="text-md font-semibold text-gray-700 dark:text-gray-200">Water Level</h6>
                    <p class="text-lg font-bold text-gray-900 dark:text-white"><%= item.distance %> cm</p>
                </div>
                <div class="p-2 bg-gray-100 border border-gray-300 rounded-lg shadow-sm dark:bg-gray-700 dark:border-gray-600">
                    <i class="fa fa-bullseye fa-2x <%= iconColorClass %>" aria-hidden="true"></i>
                    <h6 class="text-md font-semibold text-gray-700 dark:text-gray-200">Status</h6>
                    <p class="text-lg font-bold <%= statusTextClass %> dark:text-white"><%= item.status %></p>
                </div>
            </div>
        </div>
    </div>
    <br>
    
<% }); %>